# Kafka权威指南.md



## 数据单位
* 消息，由字节数组组成，没有特殊格式含义
* 可以有一个可选的元数据，即键，也是字节数组，没有特殊格式含义，具有相同键值的消息总被写到同一个分区
## 消息分批次写入kafka
* 批次是一组消息，这些消息属于同一个分组和分区，批次越大单次传输消息就越多，单次批次时间就越长，在吞吐量和时间延迟上做权衡
## 主题和分区
* 主题好比数据库的表，主题被划分成好几个分区，一个分区就是一个提交日志
* 消息以追加的方式写入分区，然后以先入先出的顺序读取
* 无法在整个主题范围内保证消息的顺序，但可以保证消息在单个分区内顺序
* 分区可以分布在不同的服务器上

## 生产者
* 通过分区器和键来把消息发送到指定分区
* 分区器为键生成散列并将其映射到指定分区上，保证了同样的键总在相同的分区

## 消费者
* 通过检查消息的偏移量来区分已读过的消息
* 偏移量是另外一种元数据,kafka会把它添加进消息里给定分区里每个消息的偏移量都是唯一的
* 消费者把