# FTP的主动模式和被动模式

## 主动模式
* FTP客户端从1026（例）连入到FTP服务器的命令端口--21端口。
* 然后客户端在1027（例）端口监听
* 服务端从20发送数据至客户端1027（例）端口。

* [![D4OXUf.png](https://s3.ax1x.com/2020/12/02/D4OXUf.png)](https://imgchr.com/i/D4OXUf)


## 被动模式

* FTP 连接建立后，客户端在本地打开两个随机的非系统端口 1026（例）和1027（例）
* 1026连接至服务器上的 21 端口。
* 客户端这次将会发出 PASV 命令，不允许服务器连接回其数据端口
* 服务器随后会打开一个随机的非系统端口2024（例），并发送响应至1027
* 客户端使用1027和服务端2024通信
* [![D4XCKs.png](https://s3.ax1x.com/2020/12/02/D4XCKs.png)](https://imgchr.com/i/D4XCKs)
